%!TEX encoding = UTF-8 Unicode
%!TEX program = pdflatex
% =============================================================================
% Masterarbeit: UDP Transport Options (RFC 9868)
%               Implementierung und Analyse in Zig
% =============================================================================
% Autor: Alan Bernstein
% Matrikelnummer: 2068834
% FernUniversität in Hagen - LG Kooperative Systeme
% =============================================================================

\documentclass[
    12pt,           % Schriftgröße
    a4paper,        % Papierformat
    oneside,        % Einseitiger Druck
    openany         % Kapitel auf jeder Seite beginnen (keine leeren Seiten)
]{report}

% =============================================================================
% 1. KONFIGURATION (ehemals config/preamble.tex)
% =============================================================================

% Encoding und Sprache
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}
\usepackage{csquotes}           % Korrekte Anführungszeichen

% Schrift und Layout
\usepackage{lmodern}            % Latin Modern Schrift
\usepackage{microtype}          % Bessere Typographie
\usepackage[
    left=3cm,
    right=3cm,
    top=2.5cm,
    bottom=2.5cm
]{geometry}

% Zeilenabstand 1,5-fach
\usepackage{setspace}
\onehalfspacing

% Kompakte Kapitelüberschriften (ohne titlesec - verursacht leere Seiten)
% Kapitelformat direkt über LaTeX-Befehle anpassen
\makeatletter
\renewcommand{\@makechapterhead}[1]{%
  \vspace*{-20pt}%
  {\parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
        \LARGE\bfseries \thechapter.\hspace{1em}%
    \fi
    \interlinepenalty\@M
    \LARGE \bfseries #1\par\nobreak
    \vskip 30\p@
  }}
\renewcommand{\@makeschapterhead}[1]{%
  \vspace*{-20pt}%
  {\parindent \z@ \raggedright \normalfont
    \interlinepenalty\@M
    \LARGE \bfseries #1\par\nobreak
    \vskip 30\p@
  }}
% Erlaube Seitenumbrüche zwischen aufeinanderfolgenden Überschriften ohne Fließtext.
% Ohne diesen Patch bilden Überschriften eine unbrechbare Kette (@nobreaktrue kaskadiert),
% die bei Stub-Kapiteln die Seitenhöhe übersteigt und leere Seiten erzeugt.
\let\@orig@startsection\@startsection
\def\@startsection{\@nobreakfalse\@orig@startsection}
\makeatother

% Abstand zwischen Fußnotennummer und -text
\makeatletter
\renewcommand{\@makefntext}[1]{%
  \noindent\@makefnmark\enspace #1}
\makeatother

% Seitenstil: leere Kopfzeile, Seitennummer zentriert im Fuß
\usepackage{fancyhdr}
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{\thepage}
    \renewcommand{\headrulewidth}{0pt}
}
\pagestyle{plain}

% Bibliographie
\usepackage[
    backend=biber,
    style=numeric-comp,
    sorting=none,
    giveninits=true,
    maxbibnames=99
]{biblatex}
\addbibresource{literatur.bib}

% Grafiken und Tabellen
\usepackage{graphicx}
\graphicspath{{figures/}}
\usepackage{float}
\usepackage{booktabs}           % Schöne Tabellen
\usepackage{tabularx}           % Flexible Tabellen
\usepackage{longtable}          % Mehrseitige Tabellen
\usepackage{multirow}           % Mehrzeilige Zellen
\usepackage{amssymb}            % Für \checkmark Symbol

% Code-Listings
\usepackage{listings}
\usepackage{fancyvrb}            % Zentrierbare Verbatim-Umgebungen
\usepackage{xcolor}

% Farben für Listings
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.97,0.97,0.97}

\lstdefinestyle{codestyle}{
    backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{blue},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    frame=single
}
\lstset{style=codestyle}

% Sprachdefinitionen für Code
\lstdefinelanguage{Zig}{
    keywords={const, var, fn, pub, return, if, else, while, for, switch, break, continue,
              try, catch, defer, errdefer, orelse, and, or, not, struct, enum, union,
              packed, extern, export, inline, comptime, test, unreachable, undefined,
              null, true, false},
    keywordstyle=\color{blue}\bfseries,
    ndkeywords={u8, u16, u32, u64, i8, i16, i32, i64, usize, isize, bool, void, anytype, type,
                @intCast, @truncate, @ptrCast, @alignCast, @bitCast, @import, @This, @typeName},
    ndkeywordstyle=\color{codepurple}\bfseries,
    sensitive=true,
    comment=[l]{//},
    morecomment=[s]{/*}{*/},
    morestring=[b]"
}

\lstdefinelanguage{Hexdump}{
    keywords={},
    sensitive=false,
    morecomment=[l]{|}
}

% Hyperlinks
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=black,
    urlcolor=blue,
    pdftitle={Masterarbeit - UDP Transport Options (RFC 9868)},
    pdfauthor={Alan Bernstein}
}

% Abkürzungsverzeichnis
\usepackage[
    acronym,
    toc,
    nonumberlist
]{glossaries}
\makeglossaries

% Abkürzungen definieren
% RFC 9868 Options
\newacronym{ocs}{OCS}{Option Checksum}
\newacronym{frag}{FRAG}{Fragmentation Option}
\newacronym{time}{TIME}{Timestamp Option}
\newacronym{auth}{AUTH}{Authentication Option}
\newacronym{eol}{EOL}{End of List}
\newacronym{nop}{NOP}{No Operation}
\newacronym{apc}{APC}{Alternate Payload Checksum}
\newacronym{mds}{MDS}{Maximum Datagram Size}
\newacronym{mrds}{MRDS}{Maximum Reassembled Datagram Size}

% Verwandte Technologien
\newacronym{dtls}{DTLS}{Datagram Transport Layer Security}
\newacronym{pmtu}{PMTU}{Path Maximum Transmission Unit}

% Sonstiges
\usepackage{enumitem}           % Anpassbare Listen
\usepackage{etoolbox}           % Zum Patchen von Befehlen
\usepackage{caption}            % Bildunterschriften anpassen
\usepackage{subcaption}         % Subfigures
\usepackage{pdfpages}           % PDF-Seiten einbinden
\usepackage[disable]{todonotes} % TODO-Notizen deaktiviert

% =============================================================================
% 2. EIGENE BEFEHLE (ehemals config/commands.tex)
% =============================================================================

% Textauszeichnung
\newcommand{\term}[1]{\textit{#1}}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\file}[1]{\texttt{#1}}
\newcommand{\filepath}[1]{\texttt{#1}}
\newcommand{\env}[1]{\texttt{\$#1}}

% Referenzen
\newcommand{\chapref}[1]{Kapitel~\ref{#1}}
\newcommand{\secref}[1]{Abschnitt~\ref{#1}}
\newcommand{\figref}[1]{Abbildung~\ref{#1}}
\newcommand{\tabref}[1]{Tabelle~\ref{#1}}
\newcommand{\lstref}[1]{Listing~\ref{#1}}

% Fachbegriffe für UDP Options
\newcommand{\surplusarea}{\term{Surplus Area}}
\newcommand{\optionchecksum}{\term{Option Checksum (OCS)}}
\newcommand{\fragoption}{\term{FRAG Option}}
\newcommand{\timeoption}{\term{TIME Option}}
\newcommand{\authoption}{\term{AUTH Option}}
\newcommand{\rfcref}[1]{RFC~#1}
\newcommand{\rfcnine}{\rfcref{9868}}

% TODO-Markierungen
\newcommand{\todoref}[1]{\todo[color=yellow!40]{Referenz: #1}}
\newcommand{\todocontent}[1]{\todo[color=red!40]{Inhalt: #1}}
\newcommand{\todoreview}[1]{\todo[color=green!40]{Review: #1}}

% Zitate
\newcommand{\zitat}[1]{\glqq#1\grqq}


% =============================================================================
% 3. METADATEN (ehemals config/metadata.tex)
% =============================================================================

\newcommand{\thesistitle}{UDP Transport Options}
\newcommand{\thesissubtitle}{Implementierung und Analyse von RFC 9868 in Zig}
\newcommand{\thesisauthor}{Alan Bernstein}
\newcommand{\thesismatrikel}{2068834}
\newcommand{\thesisemail}{alan.bernstein@pm.me}

\newcommand{\thesissupervisor}{Prof. Dr. Christian Icking}
\newcommand{\thesissecondexaminer}{Dr. Lihong Ma}

\newcommand{\thesisuniversity}{FernUniversität in Hagen}
\newcommand{\thesisfaculty}{Fakultät für Mathematik und Informatik}
\newcommand{\thesisdepartment}{LG Kooperative Systeme}

\newcommand{\thesisdegree}{Master of Science (M.Sc.)}
\newcommand{\thesisprogram}{Master Informatik}

\newcommand{\thesisdate}{\today}
\newcommand{\thesissubmissiondate}{[Datum der Abgabe]}


% =============================================================================
% DOKUMENT
% =============================================================================
\begin{document}

% -----------------------------------------------------------------------------
% FRONTMATTER
% -----------------------------------------------------------------------------
\pagenumbering{roman}
\pagestyle{plain}

% --- TITELSEITE ---
\begin{titlepage}
    \centering
    \vspace*{1cm}
    {\large \thesisuniversity}\\[0.3cm]
    {\large \thesisfaculty}\\[0.3cm]
    {\large \thesisdepartment}\\[2cm]
    {\LARGE \bfseries \thesistitle}\\[0.5cm]
    {\large \thesissubtitle}\\[1.5cm]
    {\Large Masterarbeit}\\[0.5cm]
    {\large im Studiengang \thesisprogram}\\[2cm]
    {\large vorgelegt von}\\[0.3cm]
    {\Large \thesisauthor}\\[0.3cm]
    {\normalsize Matrikelnummer: \thesismatrikel}
    \vfill
    \begin{tabular}{ll}
        \textbf{Erstprüfer:} & \thesissupervisor \\[0.3cm]
        \textbf{Zweitprüferin:} & \thesissecondexaminer \\[0.3cm]
    \end{tabular}
    \vfill
    {\large Hagen, \thesissubmissiondate}
\end{titlepage}

% --- VERZEICHNISSE ---
\tableofcontents

\listoffigures
\addcontentsline{toc}{chapter}{Abbildungsverzeichnis}

\listoftables
\addcontentsline{toc}{chapter}{Tabellenverzeichnis}

% Abkürzungsverzeichnis
\glsaddall
\printglossary[type=\acronymtype, title=Abkürzungsverzeichnis]

% -----------------------------------------------------------------------------
% MAINMATTER (Inhalt)
% -----------------------------------------------------------------------------
\pagenumbering{arabic}
\pagestyle{plain}

\input{chapters/01_einleitung}
\input{chapters/02_grundlagen}
\input{chapters/03_analyse}
\input{chapters/04_konzeption}
\input{chapters/05_realisierung}
\input{chapters/06_evaluation}
\input{chapters/07_fazit}

% -----------------------------------------------------------------------------
% BACKMATTER
% -----------------------------------------------------------------------------

% Literaturverzeichnis
\printbibliography[heading=bibintoc, title=Literaturverzeichnis]

% --- EIDESSTATTLICHE ERKLÄRUNG (ehemals frontmatter/declaration.tex) ---
\chapter*{Eidesstattliche Erklärung}
\addcontentsline{toc}{chapter}{Eidesstattliche Erklärung}

Ich versichere, dass ich die vorliegende Arbeit selbstständig verfasst und keine anderen als die angegebenen
Quellen und Hilfsmittel benutzt habe.

Alle Stellen der Arbeit, die wörtlich oder sinngemäß aus Veröffentlichungen oder aus anderweitigen fremden
Quellen entnommen wurden, sind als solche kenntlich gemacht.

Die Arbeit wurde in gleicher oder ähnlicher Form noch keiner Prüfungsbehörde vorgelegt.

\vspace{3cm}

\noindent
\begin{tabular}{p{6cm}p{1cm}p{6cm}}
    \dotfill & & \dotfill \\
    Ort, Datum & & Unterschrift \\
\end{tabular}

\end{document}
